syntax = "proto3";

option java_multiple_files = true;
option java_package = "org.loopring.lightcone.proto";
package com.loopring.lightcone.proto;

//message SimulateTransaction {}
//message BroadcastTransaction {}
//message GetOrderFillAmountAndCancelStatus {}
//message OrderFillAmountAndCancelStatus {}
//message GetBlock {}
//message GetTransaction {}
//message GetTracing {}
//message OrderCancelledByContract {}
//message RingDetectedInMemPoll {}
//message RingMined {}
//message ChainRolledBack {}
//message HeartBeat {}

message AddressBalanceChanged {
    bytes token = 1;
    bytes owner = 2;
    bytes value = 3;
    bool income = 4;
}

// 来源于pending filter&&rpc raw transaction，都往ringMemPool发送
message RingDetectedInMemPoll {
    bytes tx_hash = 1;
    bytes ring_hash = 2;
    repeated bytes order_hash = 3;
}

message OrderFilled {
    bytes ring_index = 1;
    bytes ring_hash = 2;
    bytes pre_order_hash = 3;
    bytes order_hash = 4;
    bytes next_order_hash = 5;
    bytes owner = 6;
    bytes token_s = 7;
    bytes token_b = 8;
    bytes amount_s = 9;
    bytes amount_b = 10;
    bytes lrc_reward = 11;
    bytes lrc_fee = 12;
    bytes split_s = 13;
    bytes split_b = 14;
    int32 fill_index = 15;
}

message RingMined {
    bytes txhash = 1;
    repeated OrderFilled fills = 2;
}

message OrderCancelled {
    bytes order_hash = 1;
    bytes amount = 2;
}

message Cutoff {
    bytes owner = 1;
    int32 cutoff = 2;
}

message CutoffPair {
    bytes owner = 1;
    string market = 2;
    int32 cutoff = 3;
}

message ChainRolledBack {
    bytes detected_block_number = 1;
    bytes delected_block_hash = 2;
    bytes fork_block_number = 3;
    bytes fork_block_hash = 4;
    bool fork = 5;
}

message HeartBeat {
    bytes block_number = 1;
}
